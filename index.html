<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Solicita√ß√£o de Servi√ßos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="container max-w-2xl">
        <div id="appContent" class="fade-in">
            <div class="bg-white card p-6 md:p-8 mb-6 rounded-2xl shadow-lg">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div class="mb-4 md:mb-0">
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">Solicita√ß√£o de Servi√ßo</h1>
                        <p class="text-gray-600">Preencha o formul√°rio abaixo para solicitar nosso servi√ßo ou produto</p>
                    </div>
                </div>

                <form id="serviceForm" class="space-y-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2" for="name">Nome Completo</label>
                        <input id="name" name="name" type="text" required class="form-input w-full px-4 py-3 border rounded-xl border-gray-300">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2" for="email">E-mail</label>
                        <input id="email" name="email" type="email" required class="form-input w-full px-4 py-3 border rounded-xl border-gray-300">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2" for="phone">Telefone</label>
                        <input id="phone" name="phone" type="tel" required class="form-input w-full px-4 py-3 border rounded-xl border-gray-300">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2" for="serviceType">Tipo de Servi√ßo</label>
                        <select id="serviceType" name="serviceType" required class="form-input w-full px-4 py-3 border rounded-xl border-gray-300">
                            <option value="">Selecione uma op√ß√£o</option>
                            <option value="consultoria">Consultoria</option>
                            <option value="desenvolvimento">Desenvolvimento Web</option>
                            <option value="design">Design Gr√°fico</option>
                            <option value="marketing">Marketing Digital</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2" for="description">Descri√ß√£o do Servi√ßo</label>
                        <textarea id="description" name="description" rows="4" required class="form-input w-full px-4 py-3 border rounded-xl border-gray-300"></textarea>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Urg√™ncia</label>
                        <div class="flex flex-wrap gap-4">
                            <label class="inline-flex items-center">
                                <input type="radio" name="urgency" value="Baixa" required>
                                <span class="ml-2">Baixa</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="urgency" value="M√©dia">
                                <span class="ml-2">M√©dia</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="urgency" value="Alta">
                                <span class="ml-2">Alta</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-medium mb-2" for="budget">Or√ßamento Previsto (R$)</label>
                        <input id="budget" name="budget" type="number" min="0" step="0.01" class="form-input w-full px-4 py-3 border rounded-xl border-gray-300">
                    </div>

                    <div class="flex items-center">
                        <input id="terms" name="terms" type="checkbox" required class="form-checkbox h-5 w-5 text-blue-600">
                        <label for="terms" class="ml-2 text-gray-700">Aceito os termos e condi√ß√µes</label>
                    </div>

                    <button type="submit" class="bg-blue-600 hover:bg-blue-800 w-full text-white font-bold py-3 px-4 rounded-full flex items-center justify-center">
                        <i class="fas fa-paper-plane mr-2"></i> Enviar Solicita√ß√£o
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        const serviceForm = document.getElementById('serviceForm');

        // Fun√ß√£o para gerar PDF
        function generatePDF(formData) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFontSize(16);
            doc.text('üìå Solicita√ß√£o de Servi√ßo', 20, 20);

            let y = 35;
            const add = (label, value) => {
                doc.text(`${label}: ${value}`, 20, y);
                y += 10;
            };

            add("Nome", formData.name);
            add("E-mail", formData.email);
            add("Telefone", formData.phone);
            add("Tipo de Servi√ßo", formData.serviceType);
            add("Urg√™ncia", formData.urgency);
            add("Or√ßamento Previsto", `R$ ${parseFloat(formData.budget || 0).toFixed(2)}`);
            add("Termos Aceitos", formData.terms ? "Sim" : "N√£o");

            doc.text("Descri√ß√£o:", 20, y);
            y += 10;
            doc.text(doc.splitTextToSize(formData.description, 170), 20, y);

            return doc.output('blob');
        }

        // Fun√ß√£o para enviar para WhatsApp
        function sendToWhatsApp(formData, pdfBlob) {
            const message = `üìå *Solicita√ß√£o de Servi√ßo*\n\n` +
                `üë§ Nome: ${formData.name}\n` +
                `üìß E-mail: ${formData.email}\n` +
                `üì± Telefone: ${formData.phone}\n` +
                `üõ†Ô∏è Servi√ßo: ${formData.serviceType}\n` +
                `‚ö° Urg√™ncia: ${formData.urgency}\n` +
                `üí∞ Or√ßamento Previsto: R$ ${parseFloat(formData.budget || 0).toFixed(2)}\n` +
                `üìù Descri√ß√£o: ${formData.description}\n` +
                `‚úÖ Termos Aceitos: ${formData.terms ? 'Sim' : 'N√£o'}`;

            const encodedMessage = encodeURIComponent(message);
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

            if (isMobile) {
                window.open(`whatsapp://send?text=${encodedMessage}`, '_blank');
            } else {
                window.open(`https://web.whatsapp.com/send?text=${encodedMessage}`, '_blank');
            }

            // Baixar PDF automaticamente
            const url = URL.createObjectURL(pdfBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `solicitacao_${formData.name.replace(/\s+/g, '_')}.pdf`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Manipular envio do formul√°rio
        serviceForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                serviceType: document.getElementById('serviceType').value,
                description: document.getElementById('description').value,
                urgency: document.querySelector('input[name="urgency"]:checked').value,
                budget: document.getElementById('budget').value,
                terms: document.getElementById('terms').checked
            };
            const pdfBlob = generatePDF(formData);
            sendToWhatsApp(formData, pdfBlob);
        });
    </script>
</body>
</html>

